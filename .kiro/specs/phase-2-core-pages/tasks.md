# Phase 2: 核心页面 - 任务清单

## 任务概述

**执行周期：** Week 3-6 (4周)  
**团队配置：** 2个前端开发 + 1个内容编辑 + 1个设计师  
**工作量估算：** 200-250 人时  

---

## 任务列表

- [ ] 1. 内容数据准备
  - 整理所有页面的内容素材
  - 准备图片和视频资源
  - 编写初始文章内容
  - _需求: Req 45_

- [ ] 1.1 整理天纪内容素材
  - 收集易学命理相关文字内容
  - 整理相关图片和图表
  - 收集相关 YouTube 视频链接
  - _需求: Req 2_

- [ ] 1.2 整理地纪内容素材
  - 收集风水地理相关文字内容
  - 整理相关图片和图表
  - 收集相关 YouTube 视频链接
  - _需求: Req 3_

- [ ] 1.3 整理人纪内容素材
  - 收集中医医学相关文字内容
  - 整理五大经典医著的内容
  - 收集相关 YouTube 视频链接
  - _需求: Req 4, Req 5-9_

- [ ] 1.4 准备初始文章
  - 编写至少10篇高质量文章
  - 准备文章配图
  - 设置文章分类和标签
  - _需求: Req 11, Req 45_

- [ ] 2. CMS 系统配置
  - 使用 Phase 1 选定的 CMS 系统
  - 配置统一 Content 内容类型
  - 设置用户权限和工作流
  - _需求: Req 20, Phase 1 Req 51_

- [ ] 2.1 配置 CMS 系统实例
  - 基于 Phase 1 选型结果配置 CMS（Strapi/Payload/自建）
  - 配置数据库连接
  - 设置管理员账号
  - 配置环境变量
  - _需求: Req 20, Phase 1 Req 51_

- [ ] 2.2 配置统一 Content 内容类型
  - 配置 Content 内容类型（对应统一Content模型）
  - 配置 ContentType 字段（STATIC_PAGE, ARTICLE, TIANJI_PAGE, DIJI_PAGE, RENJI_PAGE）
  - 配置 ContentTranslation 关联（多语言支持）
  - 配置 Category 和 Tag 内容类型（用于文章分类）
  - 配置必要的字段（slug, title, description, published等）
  - _需求: Req 20, Phase 1 Req 48_

- [ ] 2.3 配置 API 权限
  - 设置公开 API 权限
  - 配置认证和授权
  - 设置 API 限流
  - _需求: Req 20, Req 39_

- [ ] 2.4 创建 CMS API 客户端
  - 实现 `lib/cms-client.ts` 工具函数（适配Phase 1选定的CMS）
  - 实现统一的 getContents() 函数（支持type、locale等参数）
  - 实现 getContentBySlug() 函数（支持locale）
  - 实现分类和标签获取函数
  - 添加错误处理和重试逻辑
  - 实现响应数据到 ContentWithTranslation 类型的转换
  - _需求: Req 27, Phase 1 Req 48_

- [ ] 3. 页面组件开发
  - 创建可复用的内容展示组件
  - 创建导航和筛选组件
  - 创建视频播放组件
  - _需求: Req 26_

- [ ] 3.1 创建 Card 组件
  - 实现基础卡片样式
  - 支持不同变体（default、featured、compact）
  - 添加悬停效果
  - _需求: Req 1, Req 26_

- [ ] 3.2 创建 VideoPlayer 组件
  - 实现 YouTube 视频嵌入
  - 添加自定义缩略图
  - 实现延迟加载
  - 添加播放按钮交互
  - _需求: Req 13_

- [ ] 3.3 创建 Breadcrumb 组件
  - 实现面包屑导航
  - 添加结构化数据
  - 支持动态路径
  - _需求: Req 17_

- [ ] 3.4 创建 TableOfContents 组件
  - 自动提取页面标题
  - 实现滚动高亮
  - 添加平滑滚动
  - _需求: Req 1_

- [ ] 3.5 创建 ArticleFilters 组件
  - 实现分类筛选
  - 实现标签筛选
  - 实现搜索功能
  - 实现排序功能
  - _需求: Req 11_

- [ ] 3.6 创建 OptimizedImage 组件
  - 使用 Next.js Image 组件
  - 配置响应式尺寸
  - 添加模糊占位符
  - _需求: Req 18_

- [ ] 4. 主页开发
  - 实现完整的主页布局
  - 集成所有主页组件
  - 优化 SEO 和性能
  - _需求: Req 1_

- [ ] 4.1 创建 HeroSection 组件
  - 实现 Hero 区域布局
  - 添加标题和描述
  - 添加 CTA 按钮
  - 添加背景效果
  - _需求: Req 1.1_

- [ ] 4.2 创建 ThreePillarsSection 组件
  - 实现三大板块展示
  - 创建天纪、地纪、人纪卡片
  - 添加悬停效果和动画
  - _需求: Req 1.2, Req 1.3_

- [ ] 4.3 创建 ClassicBooksSection 组件
  - 实现五大经典医著展示
  - 创建书籍卡片
  - 添加响应式布局
  - _需求: Req 5-9_

- [ ] 4.4 创建 LatestArticles 组件
  - 获取最新文章数据
  - 实现文章列表展示
  - 添加"查看更多"链接
  - _需求: Req 1.4, Req 11_

- [ ] 4.5 优化主页 SEO
  - 添加完整的元数据
  - 添加 WebSite 结构化数据
  - 优化页面标题和描述
  - _需求: Req 17, Req 47_

- [ ] 5. 专题页面开发（天纪/地纪/人纪）
  - 实现专题页面布局
  - 集成内容和视频
  - 优化 SEO
  - _需求: Req 2, Req 3, Req 4_

- [ ] 5.1 创建专题页面模板
  - 实现 `app/[category]/page.tsx` 动态路由
  - 创建 Hero Banner 组件
  - 实现侧边栏导航
  - 实现主内容区域
  - _需求: Req 2, Req 3, Req 4_

- [ ] 5.2 实现天纪页面 (app/tianji/page.tsx)
  - 获取天纪内容数据
  - 渲染 MDX 内容
  - 嵌入相关视频
  - 添加相关文章推荐
  - _需求: Req 2_

- [ ] 5.3 实现地纪页面 (app/diji/page.tsx)
  - 获取地纪内容数据
  - 渲染 MDX 内容
  - 嵌入相关视频
  - 添加相关文章推荐
  - _需求: Req 3_

- [ ] 5.4 实现人纪页面 (app/renji/page.tsx)
  - 获取人纪内容数据
  - 渲染 MDX 内容
  - 嵌入相关视频
  - 添加五大经典医著链接
  - _需求: Req 4_

- [ ] 5.5 优化专题页面 SEO
  - 为每个专题页面添加唯一元数据
  - 添加 Article 结构化数据
  - 优化内部链接
  - _需求: Req 17_

- [ ] 6. 五大经典医著页面开发
  - 实现每本书的专题页面
  - 添加章节导航
  - 集成相关内容
  - _需求: Req 5-9_

- [ ] 6.1 创建针灸大成页面 (app/renji/zhenjiu/page.tsx)
  - 实现页面布局
  - 添加针灸相关内容
  - 嵌入教学视频
  - 添加穴位图表
  - _需求: Req 5_

- [ ] 6.2 创建伤寒论页面 (app/renji/shanghanlun/page.tsx)
  - 实现页面布局
  - 添加伤寒论内容
  - 添加方剂列表
  - 添加案例分析
  - _需求: Req 6_

- [ ] 6.3 创建金匮要略页面 (app/renji/jinkui/page.tsx)
  - 实现页面布局
  - 添加金匮要略内容
  - 添加方剂列表
  - 添加案例分析
  - _需求: Req 7_

- [ ] 6.4 创建神农本草经页面 (app/renji/bencao/page.tsx)
  - 实现页面布局
  - 添加本草经内容
  - 添加药材列表
  - 添加药性分类
  - _需求: Req 8_

- [ ] 6.5 创建黄帝内经页面 (app/renji/neijing/page.tsx)
  - 实现页面布局
  - 添加内经内容
  - 添加理论讲解
  - 添加相关视频
  - _需求: Req 9_

- [ ] 6.6 优化经典医著页面 SEO
  - 为每本书添加独特的元数据
  - 添加 Book 结构化数据
  - 优化关键词布局
  - _需求: Req 17, Req 42_

- [ ] 7. 易学命理专题页面开发
  - 实现易学命理页面
  - 添加分类内容
  - 集成案例分析
  - _需求: Req 10_

- [ ] 7.1 创建易学命理页面 (app/yixue/page.tsx)
  - 实现页面布局
  - 添加易学命理介绍
  - 创建分类导航（八字、紫微斗数等）
  - _需求: Req 10.1, Req 10.2_

- [ ] 7.2 添加命理案例
  - 创建案例展示组件
  - 添加实际案例内容
  - 添加案例分析
  - _需求: Req 10.3_

- [ ] 7.3 集成易学视频
  - 嵌入教学视频
  - 创建视频列表
  - 添加视频分类
  - _需求: Req 10.4, Req 13_

- [ ] 7.4 优化易学页面 SEO
  - 添加独特的元数据
  - 添加结构化数据
  - 优化关键词
  - _需求: Req 17_

- [ ] 8. 文章列表页面开发
  - 实现文章列表页面
  - 添加搜索和筛选功能
  - 实现分页
  - _需求: Req 11_

- [ ] 8.1 创建文章列表页面 (app/articles/page.tsx)
  - 实现页面布局
  - 获取文章列表数据
  - 实现文章卡片展示
  - _需求: Req 11.1, Req 11.2_

- [ ] 8.2 实现搜索功能
  - 创建搜索输入框
  - 实现关键词搜索
  - 添加搜索结果高亮
  - _需求: Req 11.3_

- [ ] 8.3 实现筛选功能
  - 创建分类筛选器
  - 创建标签筛选器
  - 实现多条件筛选
  - _需求: Req 11.4_

- [ ] 8.4 实现分页或无限滚动
  - 选择分页方案（传统分页或无限滚动）
  - 实现分页组件
  - 优化加载性能
  - _需求: Req 11.6_

- [ ] 8.5 优化文章列表 SEO
  - 添加列表页元数据
  - 添加分页链接的 rel 标签
  - 优化 URL 结构
  - _需求: Req 17_

- [ ] 9. 文章详情页面开发
  - 实现文章详情页面
  - 添加目录和相关文章
  - 优化阅读体验
  - _需求: Req 11_

- [ ] 9.1 创建文章详情页面 (app/articles/[slug]/page.tsx)
  - 实现动态路由
  - 获取文章数据
  - 渲染 MDX 内容
  - _需求: Req 11.5_

- [ ] 9.2 实现 MDX 内容处理
  - 配置 MDX 插件（语法高亮、自动链接等）
  - 创建自定义 MDX 组件
  - 优化代码块显示
  - _需求: Req 11_

- [ ] 9.3 添加文章元信息
  - 显示作者、日期、阅读量
  - 添加分类和标签
  - 添加面包屑导航
  - _需求: Req 11.2_

- [ ] 9.4 添加目录组件
  - 集成 TableOfContents 组件
  - 实现滚动高亮
  - 优化移动端显示
  - _需求: Req 11_

- [ ] 9.5 添加相关文章推荐
  - 实现相关文章算法
  - 创建推荐文章组件
  - 显示3-5篇相关文章
  - _需求: Req 11_

- [ ] 9.6 添加社交分享按钮
  - 创建分享按钮组件
  - 支持微信、微博、Twitter 等平台
  - 添加复制链接功能
  - _需求: Req 16_

- [ ] 9.7 优化文章详情 SEO
  - 生成动态元数据
  - 添加 Article 结构化数据
  - 优化 Open Graph 标签
  - _需求: Req 17, Req 11.7_

- [ ] 10. 响应式设计实现
  - 确保所有页面在不同设备上正常显示
  - 优化移动端体验
  - 测试各种屏幕尺寸
  - _需求: Req 14_

- [ ] 10.1 实现移动端导航
  - 创建汉堡菜单
  - 实现侧边栏导航
  - 添加动画效果
  - _需求: Req 14.1_

- [ ] 10.2 优化移动端布局
  - 调整所有页面的移动端布局
  - 优化触摸目标大小
  - 确保文字可读性
  - _需求: Req 14.2, Req 14.5_

- [ ] 10.3 优化平板端布局
  - 调整平板端的网格布局
  - 优化侧边栏显示
  - 测试横屏和竖屏
  - _需求: Req 14.3_

- [ ] 10.4 测试响应式设计
  - 在真实设备上测试
  - 使用浏览器开发工具测试
  - 修复发现的问题
  - _需求: Req 14.7_

- [ ] 11. SEO 优化实施
  - 为所有页面添加完整的 SEO 元素
  - 实施 pSEO 策略
  - 优化关键词布局
  - _需求: Req 17, Req 41, Req 42_

- [ ] 11.1 优化页面元数据
  - 为每个页面生成唯一的 title
  - 编写吸引人的 meta description
  - 添加相关关键词
  - _需求: Req 17.1, Req 17.2_

- [ ] 11.2 添加结构化数据
  - 为主页添加 WebSite Schema
  - 为文章添加 Article Schema
  - 为视频添加 VideoObject Schema
  - 为书籍添加 Book Schema
  - _需求: Req 17.6_

- [ ] 11.3 优化 HTML 语义
  - 使用语义化标签
  - 优化 heading 层级
  - 为所有图片添加 alt 属性
  - _需求: Req 17.3, Req 17.4, Req 17.5_

- [ ] 11.4 实施 pSEO 策略
  - 创建 pSEO 页面生成系统
  - 定义页面模板
  - 生成长尾关键词页面
  - _需求: Req 41_

- [ ] 11.5 实施关键词三层架构
  - 定义头部关键词（主页和主要专题页）
  - 定义腰部关键词（子专题页和重要文章）
  - 定义长尾关键词（pSEO 页面和普通文章）
  - _需求: Req 42_

- [ ] 11.6 优化内部链接
  - 建立合理的内链结构
  - 使用关键词作为锚文本
  - 确保重要页面的链接深度
  - _需求: Req 42.6_

- [ ] 11.7 更新 sitemap
  - 将所有新页面添加到 sitemap
  - 设置正确的优先级和更新频率
  - 提交到 Google Search Console
  - _需求: Req 17_

- [ ] 12. 性能优化实施
  - 优化页面加载速度
  - 实施代码分割和懒加载
  - 优化图片和资源
  - _需求: Req 18_

- [ ] 12.1 实施图片优化
  - 使用 Next.js Image 组件
  - 转换图片为 WebP 格式
  - 实施图片懒加载
  - 添加模糊占位符
  - _需求: Req 18.4_

- [ ] 12.2 实施代码分割
  - 动态导入重型组件
  - 分离第三方库
  - 优化 bundle 大小
  - _需求: Req 18.5_

- [ ] 12.3 实施缓存策略
  - 配置静态资源缓存
  - 实施 API 响应缓存
  - 使用 Next.js 缓存功能
  - _需求: Req 18.6_

- [ ] 12.4 优化 Core Web Vitals
  - 优化 LCP（最大内容绘制）
  - 优化 FID（首次输入延迟）
  - 优化 CLS（累积布局偏移）
  - _需求: Req 18.1, Req 17.7_

- [ ] 12.5 运行性能测试
  - 使用 Lighthouse 测试所有页面
  - 使用 PageSpeed Insights 测试
  - 修复发现的性能问题
  - 确保所有页面分数 > 90
  - _需求: Req 18.7_

- [ ] 13. 内容发布和审核
  - 将准备好的内容导入 CMS
  - 审核内容质量
  - 发布初始内容
  - _需求: Req 45_

- [ ] 13.1 导入内容到 CMS
  - 将文章内容导入 CMS（使用Phase 1选定的系统）
  - 为每个内容设置正确的 ContentType（ARTICLE, TIANJI_PAGE等）
  - 创建多语言翻译（zh-CN, zh-TW, en）
  - 上传图片和媒体文件
  - 设置分类和标签
  - 验证 Content-ContentTranslation 关联正确
  - _需求: Req 20, Req 45, Phase 1 Req 48, Req 49_

- [ ] 13.2 审核内容质量
  - 检查内容准确性
  - 检查格式一致性
  - 检查图片质量
  - 修正错别字和格式问题
  - _需求: Req 45.3_

- [ ] 13.3 发布初始内容
  - 发布至少10篇文章
  - 发布所有专题页面内容
  - 发布五大经典医著内容
  - _需求: Req 45.4_

- [ ] 14. 测试和验证
  - 进行全面的功能测试
  - 进行跨浏览器测试
  - 进行可访问性测试
  - _需求: 所有需求_

- [ ] 14.1 功能测试
  - 测试所有页面链接
  - 测试搜索和筛选功能
  - 测试视频播放
  - 测试响应式布局
  - _需求: 所有需求_

- [ ] 14.2 跨浏览器测试
  - 在 Chrome 上测试
  - 在 Safari 上测试
  - 在 Firefox 上测试
  - 在移动浏览器上测试
  - _需求: Req 14_

- [ ] 14.3 可访问性测试
  - 使用屏幕阅读器测试
  - 检查键盘导航
  - 检查颜色对比度
  - 运行 Lighthouse 可访问性测试
  - _需求: Req 17_

- [ ] 14.4 SEO 验证
  - 验证所有页面的元数据
  - 验证结构化数据
  - 验证 sitemap
  - 使用 Google Rich Results Test 测试
  - _需求: Req 17_

- [ ] 14.5 性能验证
  - 运行 Lighthouse 测试
  - 验证 Core Web Vitals
  - 检查页面加载时间
  - _需求: Req 18_

- [ ] 15. 文档和交付
  - 编写内容管理指南
  - 更新项目文档
  - 准备演示和培训
  - _需求: 所有需求_

- [ ] 15.1 编写内容管理指南
  - 编写 CMS 使用文档（基于Phase 1选定的系统）
  - 编写内容发布流程（包括ContentType设置）
  - 编写多语言内容管理流程（ContentTranslation工作流）
  - 编写 SEO 优化指南
  - _需求: Req 20, Req 45, Phase 1 Req 48, Req 49_

- [ ] 15.2 更新项目文档
  - 更新 README
  - 更新组件文档
  - 更新 API 文档
  - _需求: 所有需求_

- [ ] 15.3 准备演示
  - 准备功能演示
  - 准备性能报告
  - 准备 SEO 报告
  - _需求: 所有需求_

- [ ] 16. 单元测试和集成测试
  - 为核心组件编写单元测试
  - 为API编写集成测试
  - 测试多语言内容获取
  - _需求: Phase 1 Req 37_

- [ ] 16.1 页面组件单元测试
  - 为TopicPage组件编写测试（天纪、地纪、人纪）
  - 为ContentList组件编写测试（文章列表）
  - 为ContentCard组件编写测试
  - 为VideoPlayer组件编写测试
  - 确保测试覆盖率≥80%
  - _需求: Phase 1 Req 37_

- [ ] 16.2 内容API集成测试
  - 测试getContents API（不同type参数）
  - 测试getContentBySlug API
  - 测试多语言内容获取（不同locale）
  - 测试内容过滤和搜索功能
  - 测试分页功能
  - _需求: Phase 1 Req 37_

- [ ] 16.3 SEO组件测试
  - 测试ContentSchema组件输出正确的结构化数据
  - 测试generateContentMetadata函数
  - 测试多语言hreflang标签生成
  - 验证不同ContentType的SEO元数据
  - _需求: Req 17, Phase 1 Req 37_

- [ ] 16.4 多语言功能测试
  - 测试locale路由切换
  - 测试ContentTranslation获取
  - 测试LanguageSwitcher组件
  - 测试不同locale下的内容显示
  - 验证翻译完整性
  - _需求: Phase 1 Req 49_

---

## 任务依赖关系

```
1. 内容数据准备
   ↓
2. CMS 系统配置（使用Phase 1选定的CMS）
   ↓
3. 页面组件开发 + 16.1 组件单元测试（并行）
   ↓
4. 主页开发 ← 5. 专题页面开发 ← 6. 经典医著页面开发
   ↓              ↓                    ↓
7. 易学命理页面 ← 8. 文章列表页面 ← 9. 文章详情页面
   ↓              ↓                    ↓
   └──────────→ 16.2 内容API集成测试
                 ↓
10. 响应式设计实施
   ↓
11. SEO 优化实施 ← 12. 性能优化实施
   ↓              ↓
16.3 SEO组件测试  16.4 多语言功能测试
   ↓
13. 内容发布和审核
   ↓
14. 测试和验证
   ↓
15. 文档和交付
```

---

## 验收检查清单

### 页面完整性
- [ ] 主页完整且美观
- [ ] 天纪、地纪、人纪页面完整
- [ ] 五大经典医著页面完整
- [ ] 易学命理页面完整
- [ ] 文章列表和详情页面完整
- [ ] 所有页面链接正常

### 功能完整性
- [ ] 搜索功能正常工作
- [ ] 筛选功能正常工作
- [ ] 视频播放正常
- [ ] 分页或无限滚动正常
- [ ] 社交分享功能正常
- [ ] 目录导航正常

### 响应式设计
- [ ] 所有页面在手机上正常显示
- [ ] 所有页面在平板上正常显示
- [ ] 所有页面在桌面上正常显示
- [ ] 移动端导航正常工作
- [ ] 触摸交互正常

### SEO 优化
- [ ] 所有页面有唯一的 title
- [ ] 所有页面有 meta description
- [ ] 所有页面有结构化数据
- [ ] 所有图片有 alt 属性
- [ ] sitemap 包含所有页面
- [ ] robots.txt 配置正确

### 性能指标
- [ ] 所有页面 Lighthouse Performance > 90
- [ ] 所有页面 LCP < 2.5s
- [ ] 所有页面 FID < 100ms
- [ ] 所有页面 CLS < 0.1
- [ ] 图片使用 WebP 格式
- [ ] 代码分割正确实施

### 内容质量
- [ ] 至少10篇文章已发布
- [ ] 所有专题页面内容完整
- [ ] 内容无错别字
- [ ] 图片质量良好
- [ ] 视频链接有效

---

**文档版本：** 1.0.0  
**创建日期：** 2024-11-07  
**最后更新：** 2024-11-07  
**文档状态：** ✅ 已完成
